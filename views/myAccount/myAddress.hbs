<div class="container mt-5">
    <div class="d-flex align-items-center justify-content-between flex-wrap">
        <h3 class="h4 fw-bold text-second mb-2">Quản lý địa chỉ</h3>
        <input id="addAddress" class="btn user-btn" type="button" value="Thêm địa chỉ mới">
    </div>

    {{!-- add address --}}
    <form action="/my-account/my-address/new-address" method="post" class="add-form card p-4 mt-3">
        <div class="row g-3">
            <div class="col-12 col-md-6">
                <label class="form-label" for="address_cust_name">Họ và tên</label>
                <input name="address_cust_name" id="address_cust_name" type="text" class="form-control" placeholder="Nhập họ và tên" required>
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label" for="phone">Số điện thoại</label>
                <input name="phone" id="phone" type="text" class="form-control" placeholder="VD: 0987 654 321" required>
            </div>

            <div class="col-12 col-md-6">
                <label class="form-label" for="house_name">Tên nhà/Địa chỉ</label>
                <input name="house_name" id="house_name" type="text" class="form-control" placeholder="Tên nhà, số nhà" required>
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label" for="area_street">Phố/Đường</label>
                <input name="area_street" id="area_street" type="text" class="form-control" placeholder="Tên phố/đường" required>
            </div>

            <div class="col-12 col-md-6">
                <label class="form-label" for="locality">Phường/Xã</label>
                <input name="locality" id="locality" type="text" class="form-control" placeholder="Phường/Xã" required>
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label" for="town">Quận/Huyện</label>
                <input name="town" id="town" type="text" class="form-control" placeholder="Quận/Huyện" required>
            </div>

            <div class="col-12 col-md-6">
                <label class="form-label" for="state">Tỉnh/Thành phố</label>
                <input name="state" id="state" type="text" class="form-control" placeholder="Tỉnh/Thành phố" required>
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label" for="pincode">Mã bưu chính</label>
                <input name="pincode" id="pincode" type="number" class="form-control" placeholder="Ví dụ: 700000" required>
            </div>

            <div class="col-12 col-md-6">
                <label class="form-label" for="landmark">Điểm mốc</label>
                <input name="landmark" id="landmark" type="text" class="form-control" placeholder="Gần..." required>
            </div>
            <div class="col-12 col-md-6">
                <label class="form-label" for="alternate_phone">SĐT dự phòng</label>
                <input name="alternate_phone" id="alternate_phone" type="number" class="form-control" placeholder="Tùy chọn">
                <input name="customer_id" type="hidden" value="{{userData._id}}" class="form-control">
            </div>

            <div class="col-12 d-flex gap-4 mt-2">
                <div class="form-check">
                    <input class="form-check-input" type="radio" value="HOME" name="address_type" id="flexRadioDefault1" checked>
                    <label class="form-check-label" for="flexRadioDefault1">NHÀ</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" value="WORK" type="radio" name="address_type" id="flexRadioDefault2">
                    <label class="form-check-label" for="flexRadioDefault2">CÔNG TY</label>
                </div>
            </div>

            <div class="col-12 d-flex gap-3 mt-3">
                <input class="btn but user-btn" type="submit" value="Lưu địa chỉ" />
                <input class="btn but clear-btn btn-outline" type="reset" autocomplete="on" value="Xóa" />
            </div>
        </div>
    </form>


    <div class="mt-3">
        {{#each address}}
            <div class="card p-3 mb-2">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="badge badge-info">{{this.address_type}}</span>
                    <div class="d-flex gap-3">
                        <a style="text-decoration: none;" href="/my-account/my-address/edit-address/{{this._id}}" class="text-second">Sửa</a>
                        <a style="text-decoration: none; cursor:pointer" onclick="delete_Adrs_Alert('{{this._id}}')" class="text-danger">Xóa</a>
                    </div>
                </div>
                <div class="h6 fw-bold text-second mb-1">{{this.address_cust_name}} · {{this.phone}}</div>
                <div class="muted">
                    {{this.house_name}}(H), {{this.locality}}, {{this.area_street}}, {{this.landmark}}, {{this.state}} - <span class="fw-bold">{{this.pincode}}</span>
                </div>
            </div>
        {{/each}}
    </div>
</div>

<script>
    $(document).ready(() => {
        $('.add-form').hide();
        //add new Address form display
        const addAddress = document.getElementById('addAddress');
        if (addAddress) {
            addAddress.addEventListener('click', (e) => {
                e.preventDefault();
                $('.add-form').slideDown();
            })
        }
    })
</script>
