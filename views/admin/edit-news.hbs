<section class="category d-flex mt-2" style="width: 100%;">
  <div class="object-fit-contain mt-3" style="width: 100%;">
    <div class="header d-flex justify-content-between align-items-center">
      <h3 class="h3 text-second fw-bold mb-3">Sửa tin tức</h3>
    </div>
    <form class="card px-3 py-3" method="post" action="/admin/news/{{item._id}}" enctype="multipart/form-data">
      <label class="mb-1">Tiêu đề</label>
      <input class="form-control mb-3" type="text" name="title" value="{{item.title}}" required />

      <label class="mb-1">Tóm tắt</label>
      <textarea class="form-control mb-3" name="summary" rows="3" required>{{item.summary}}</textarea>

      <label class="mb-1">Nội dung</label>
      <textarea class="form-control mb-3" id="editor" name="content" required>{{{item.content}}}</textarea>

      <label class="mb-1">Ảnh bìa</label>
      {{#if item.coverImage}}<img class="rounded mb-2" src="{{item.coverImage}}" alt="{{item.title}}" style="height:80px" />{{/if}}
      <input class="form-control mb-3" type="file" name="coverImage" accept="image/*" />

      <label class="mb-1">Tags (phân cách bằng dấu phẩy)</label>
      <input class="form-control mb-3" type="text" name="tags" value="{{#each item.tags}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}" />

      <label class="mb-1">Trạng thái</label>
      <select class="form-select mb-3" name="status">
        <option value="published" {{#if (eq item.status 'published')}}selected{{/if}}>Xuất bản</option>
        <option value="draft" {{#if (eq item.status 'draft')}}selected{{/if}}>Nháp</option>
      </select>

      <button type="submit" class="btn add-btn">Cập nhật</button>
    </form>
  </div>
</section>

<script src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>
<script>
  CKEDITOR.replace('editor');
  document.querySelector('form').addEventListener('submit', function() {
    for (var instance in CKEDITOR.instances)
      CKEDITOR.instances[instance].updateElement();
  });
</script>
