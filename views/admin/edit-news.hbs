{{> admin-header}}
{{> admin-sidebar}}
<div class="admin-container">
  <h1>Sửa tin tức</h1>
  <form method="post" action="/admin/news/{{item._id}}" enctype="multipart/form-data">
    <label>Tiêu đề</label>
    <input type="text" name="title" value="{{item.title}}" required />

    <label>Tóm tắt</label>
    <textarea name="summary" rows="3" required>{{item.summary}}</textarea>

    <label>Nội dung</label>
    <textarea id="editor" name="content" required>{{{item.content}}}</textarea>

    <label>Ảnh bìa</label>
    {{#if item.coverImage}}<img src="{{item.coverImage}}" alt="{{item.title}}" style="height:80px" />{{/if}}
    <input type="file" name="coverImage" accept="image/*" />

    <label>Tags (phân cách bằng dấu phẩy)</label>
    <input type="text" name="tags" value="{{#each item.tags}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}" />

    <label>Trạng thái</label>
    <select name="status">
      <option value="published" {{#if (eq item.status 'published')}}selected{{/if}}>Xuất bản</option>
      <option value="draft" {{#if (eq item.status 'draft')}}selected{{/if}}>Nháp</option>
    </select>

    <button type="submit" class="btn">Cập nhật</button>
  </form>
</div>

<script src="https://cdn.ckeditor.com/4.22.1/standard/ckeditor.js"></script>
<script>
  CKEDITOR.replace('editor');
  document.querySelector('form').addEventListener('submit', function() {
    for (var instance in CKEDITOR.instances)
      CKEDITOR.instances[instance].updateElement();
  });
</script>
